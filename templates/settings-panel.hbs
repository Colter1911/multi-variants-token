<section class="mta-settings-panel {{#if randomEnabled}}is-disabled{{/if}}">
  <header>
    <h3>{{localize "MTA.SettingsPanelTitle" label=label}}</h3>
  </header>

  <div class="mta-form-grid" {{#if randomEnabled}}disabled{{/if}}>
    <label>
      <span class="label-text">{{localize "MTA.DefaultImage"}}</span>
      <input type="checkbox" name="isDefault" {{checked image.isDefault}} />
    </label>

    {{#if isToken}}
    <div class="mta-scale-group" style="display: flex; gap: 10px; margin-top: 5px;">
      <label style="flex: 1;">
        <span class="label-text">{{localize "MTA.ScaleX"}}</span>
        <input type="number" name="scaleX" value="{{image.scaleX}}" step="0.01" />
      </label>
      <label style="flex: 1;">
        <span class="label-text">{{localize "MTA.ScaleY"}}</span>
        <input type="number" name="scaleY" value="{{image.scaleY}}" step="0.01" />
      </label>
    </div>
    {{/if}}

    <hr class="mta-dashed-separator">

    <label>
      <span class="label-text">{{localize "MTA.AutoEnable"}}</span>
      <input type="checkbox" name="autoEnable.enabled" {{checked image.autoEnable.enabled}} data-control="autoEnable" />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.WoundedEnable"}}</span>
      <input type="checkbox" name="autoEnable.wounded" {{checked image.autoEnable.wounded}} {{#unless
        image.autoEnable.enabled}}disabled{{/unless}} />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.WoundedPercent"}}</span>
      <input type="number" name="autoEnable.woundedPercent" value="{{image.autoEnable.woundedPercent}}" min="1" max="99"
        {{#unless image.autoEnable.enabled}}disabled{{/unless}} />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.DieEnable"}}</span>
      <input type="checkbox" name="autoEnable.die" {{checked image.autoEnable.die}} {{#unless
        image.autoEnable.enabled}}disabled{{/unless}} />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.StatusCondition"}}</span>
      <select name="autoEnable.status" {{#unless image.autoEnable.enabled}}disabled{{/unless}}>
        {{#each statusOptions}}
        <option value="{{value}}" {{#if selected}}selected{{/if}}>
          {{label}}
        </option>
        {{/each}}
      </select>
    </label>
    <hr class="mta-dashed-separator">

    {{#if isToken}}
    <label>
      <span class="label-text">{{localize "MTA.DynamicTokenRing"}}</span>
      <input type="checkbox" name="dynamicRing.enabled" {{checked image.dynamicRing.enabled}} />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.Scale"}}</span>
      <span class="label-control">
        <input type="range" name="dynamicRing.scaleCorrection" min="0.1" max="3" step="0.1"
          value="{{image.dynamicRing.scaleCorrection}}" />
        <span class="range-value">{{image.dynamicRing.scaleCorrection}}</span>
      </span>
    </label>

    <label>
      <span class="label-text">{{localize "MTA.RingColor"}}</span>
      <input type="color" name="dynamicRing.ringColor" value="{{image.dynamicRing.ringColor}}" />
    </label>

    <label>
      <span class="label-text">{{localize "MTA.BackgroundColor"}}</span>
      <input type="color" name="dynamicRing.backgroundColor" value="{{image.dynamicRing.backgroundColor}}" />
    </label>
    <hr class="mta-dashed-separator">
    {{/if}}

    <button type="button" class="mta-create-token-btn" data-action="create-token">
      <i class="fas fa-magic"></i> {{localize "MTA.CreateAutoToken"}}
    </button>

    <button type="button" class="mta-create-token-btn mta-create-manual-token-btn" data-action="create-manual-token">
      <i class="fas fa-crosshairs"></i> {{localize "MTA.CreateManualToken"}}
    </button>

    <label class="label-file">
      <span class="label-text">{{localize "MTA.ImageFile"}}</span>
      <div class="mta-file-input">
        <input type="text" name="src" value="{{image.src}}" />
        <button type="button" data-action="browse-file" title="{{localize 'MTA.Browse'}}"><i
            class="fas fa-file-import"></i></button>
      </div>
    </label>
  </div>

  <footer class="mta-panel-actions">
    <button type="button" class="mta-button-danger" data-action="delete-image" {{#if
      randomEnabled}}disabled{{/if}}>{{localize "MTA.Delete"}}</button>
    <button type="button" class="mta-button-primary" data-action="save-settings" {{#if
      randomEnabled}}disabled{{/if}}>{{localize "MTA.Save"}}</button>
  </footer>
</section>